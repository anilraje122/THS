<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async Await</title>
</head>
<body>
    
</body>
<script>
    const posts = [
        {title: "Post one", body: "This is post one"},
        {title: "Post two", body: "This is post two"},
        {title: "Post three", body: "This is post three"}
    ];

    const getPosts = () => {
        let output = '';
        setTimeout(() => {
            posts.forEach((post, index) => {
                output += `<li> ${post.title} </li>`;
            });
            document.body.innerHTML = output;
        }, 2000);
    }

    const addPost = (post) => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                posts.push(post);
                let err = false;
                if(!err) {
                    resolve();
                } else {
                    reject("Error occured!");
                }
            }, 5000);
        });
    }

    const main = async () => {
        await addPost({title: "Post four", body: "This is post four"});
        getPosts();
    }

    main();
</script>
</html>